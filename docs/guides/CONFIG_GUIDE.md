# ğŸ“‹ é…ç½®æ–‡ä»¶ä½¿ç”¨æŒ‡å—

## æ ¸å¿ƒç†å¿µ

**æ‰€æœ‰ä¸‹è½½ä»»åŠ¡éƒ½é€šè¿‡é…ç½®æ–‡ä»¶å®ç°ï¼Œæ— éœ€ä¿®æ”¹æºä»£ç ï¼**

PixivFlow çš„è®¾è®¡ç†å¿µæ˜¯ï¼šé€šè¿‡é…ç½®æ–‡ä»¶å®šä¹‰ä¸‹è½½ä»»åŠ¡ï¼Œä½¿ç”¨é€šç”¨çš„ `download` å‘½ä»¤æ‰§è¡Œã€‚å¦‚æœæŸä¸ªä»»åŠ¡æ— æ³•é€šè¿‡é…ç½®æ–‡ä»¶å®ç°ï¼Œé‚£è¯´æ˜é€šç”¨åŠŸèƒ½éœ€è¦å¢å¼ºï¼Œè€Œä¸æ˜¯æ·»åŠ ç‰¹å®šè„šæœ¬ã€‚

## ğŸ¯ å¦‚ä½•å®ç°ç‰¹å®šä¸‹è½½ä»»åŠ¡

### æ–¹æ³•ä¸€ï¼šä¿®æ”¹ç°æœ‰é…ç½®æ–‡ä»¶

1. **ç¼–è¾‘é…ç½®æ–‡ä»¶**ï¼ˆé€šå¸¸æ˜¯ `config/standalone.config.json`ï¼‰
2. **ä¿®æ”¹ `targets` æ•°ç»„**ï¼Œæ·»åŠ æˆ–ä¿®æ”¹ä¸‹è½½ç›®æ ‡
3. **è¿è¡Œé€šç”¨å‘½ä»¤**ï¼š`pixivflow download` æˆ– `npm run download`

### æ–¹æ³•äºŒï¼šä½¿ç”¨ç¤ºä¾‹é…ç½®æ–‡ä»¶

1. **å¤åˆ¶ç¤ºä¾‹é…ç½®**ï¼š
   ```bash
   cp config/specific-download.example.json config/standalone.config.json
   ```

2. **ä¿®æ”¹é…ç½®**ï¼ˆå¦‚éœ€è¦ï¼‰ï¼š
   - æ›´æ–° `refreshToken`ï¼ˆå¦‚æœè¿˜æ²¡æœ‰ç™»å½•ï¼‰
   - è°ƒæ•´ `targets` æ•°ç»„ä¸­çš„ä¸‹è½½ç›®æ ‡

3. **è¿è¡Œä¸‹è½½**ï¼š
   ```bash
   pixivflow download
   ```

### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨ --config å‚æ•°æŒ‡å®šé…ç½®æ–‡ä»¶

```bash
# ä½¿ç”¨è‡ªå®šä¹‰é…ç½®æ–‡ä»¶
pixivflow download --config config/my-custom-config.json
```

## ğŸ“ é…ç½®æ–‡ä»¶ç»“æ„

### åŸºæœ¬ç»“æ„

```json
{
  "pixiv": {
    "refreshToken": "YOUR_REFRESH_TOKEN"
  },
  "targets": [
    {
      "type": "illustration",
      "tag": "åŸç¥",
      "limit": 10,
      "mode": "search"
    }
  ]
}
```

### targets æ•°ç»„è¯´æ˜

`targets` æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå¯ä»¥åŒ…å«å¤šä¸ªä¸‹è½½ç›®æ ‡ã€‚æ¯ä¸ªç›®æ ‡ä¼šè¢«**é¡ºåºæ‰§è¡Œ**ã€‚

#### æ”¯æŒçš„ target ç±»å‹

1. **illustration**ï¼ˆæ’ç”»/å›¾ç‰‡ï¼‰
2. **novel**ï¼ˆå°è¯´ï¼‰

## ğŸ“– å®Œæ•´é…ç½®é€‰é¡¹è¯´æ˜

### å¿…å¡«å­—æ®µ

| å­—æ®µ | è¯´æ˜ | ç±»å‹ | ç¤ºä¾‹ |
|------|------|------|------|
| `type` | å†…å®¹ç±»å‹ | `"illustration"` æˆ– `"novel"` | `"illustration"` |

### åŸºç¡€é…ç½®å­—æ®µ

| å­—æ®µ | è¯´æ˜ | ç±»å‹ | é»˜è®¤å€¼ | ç¤ºä¾‹ |
|------|------|------|--------|------|
| `tag` | æœç´¢æ ‡ç­¾ï¼ˆæ”¯æŒå¤šä¸ªæ ‡ç­¾ï¼Œç”¨ç©ºæ ¼åˆ†éš”ã€‚é»˜è®¤ANDå…³ç³»ï¼Œå¯é€šè¿‡`tagRelation`è®¾ç½®ä¸ºORå…³ç³»ï¼‰ | `string` | - | `"åŸç¥"` æˆ– `"æ˜æ—¥æ–¹èˆŸ ã‚¢ãƒ¼ã‚¯ãƒŠã‚¤ãƒ„"` |
| `limit` | æ¯æ¬¡è¿è¡Œä¸‹è½½æ•°é‡é™åˆ¶ | `number` | - | `10` |
| `mode` | ä¸‹è½½æ¨¡å¼ | `"search"` æˆ– `"ranking"` | `"search"` | `"search"` |

### æœç´¢ç›¸å…³å­—æ®µï¼ˆmode="search" æ—¶ä½¿ç”¨ï¼‰

| å­—æ®µ | è¯´æ˜ | å¯é€‰å€¼ | é»˜è®¤å€¼ | ç¤ºä¾‹ |
|------|------|--------|--------|------|
| `searchTarget` | æœç´¢èŒƒå›´ | `"partial_match_for_tags"`ï¼ˆéƒ¨åˆ†åŒ¹é…æ ‡ç­¾ï¼‰<br>`"exact_match_for_tags"`ï¼ˆç²¾ç¡®åŒ¹é…æ ‡ç­¾ï¼‰<br>`"title_and_caption"`ï¼ˆæ ‡é¢˜å’Œè¯´æ˜ï¼‰ | `"partial_match_for_tags"` | `"partial_match_for_tags"` |
| `sort` | æ’åºæ–¹å¼ | `"date_desc"`ï¼ˆæŒ‰æ—¥æœŸé™åºï¼Œæœ€æ–°ä¼˜å…ˆï¼‰<br>`"date_asc"`ï¼ˆæŒ‰æ—¥æœŸå‡åºï¼Œæœ€æ—§ä¼˜å…ˆï¼‰<br>`"popular_desc"`ï¼ˆæŒ‰äººæ°”é™åºï¼Œæ”¶è—æœ€å¤šä¼˜å…ˆï¼‰ | `"date_desc"` | `"popular_desc"` |
| `restrict` | å†…å®¹é™åˆ¶ | `"public"`ï¼ˆå…¬å¼€ï¼‰<br>`"private"`ï¼ˆç§æœ‰ï¼‰ | `"public"` | `"public"` |

### æ’è¡Œæ¦œç›¸å…³å­—æ®µï¼ˆmode="ranking" æ—¶ä½¿ç”¨ï¼‰

| å­—æ®µ | è¯´æ˜ | å¯é€‰å€¼ | é»˜è®¤å€¼ | ç¤ºä¾‹ |
|------|------|--------|--------|------|
| `rankingMode` | æ’è¡Œæ¦œæ¨¡å¼ | `"day"`ï¼ˆæ—¥æ¦œï¼‰<br>`"week"`ï¼ˆå‘¨æ¦œï¼‰<br>`"month"`ï¼ˆæœˆæ¦œï¼‰<br>`"day_male"`ï¼ˆç”·æ€§å‘æ—¥æ¦œï¼‰<br>`"day_female"`ï¼ˆå¥³æ€§å‘æ—¥æ¦œï¼‰<br>`"day_ai"`ï¼ˆAIä½œå“æ—¥æ¦œï¼‰<br>`"week_original"`ï¼ˆåŸåˆ›å‘¨æ¦œï¼‰<br>`"week_rookie"`ï¼ˆæ–°äººå‘¨æ¦œï¼‰<br>`"day_r18"`ï¼ˆR18æ—¥æ¦œï¼‰<br>`"day_male_r18"`ï¼ˆç”·æ€§å‘R18æ—¥æ¦œï¼‰<br>`"day_female_r18"`ï¼ˆå¥³æ€§å‘R18æ—¥æ¦œï¼‰ | `"day"` | `"day"` |
| `rankingDate` | æ’è¡Œæ¦œæ—¥æœŸ | `"YYYY-MM-DD"` æ ¼å¼æˆ– `"YESTERDAY"` | ä»Šå¤© | `"2024-01-15"` æˆ– `"YESTERDAY"` |
| `filterTag` | è¿‡æ»¤æ ‡ç­¾ï¼ˆä»æ’è¡Œæ¦œç»“æœä¸­ç­›é€‰åŒ…å«æ­¤æ ‡ç­¾çš„ä½œå“ï¼‰ | `string` æˆ– `null` | `null`ï¼ˆä¸è¿‡æ»¤ï¼‰ | `"ã‚¢ãƒ¼ã‚¯ãƒŠã‚¤ãƒ„"` |

### æ ‡ç­¾å…³ç³»å­—æ®µ

| å­—æ®µ | è¯´æ˜ | ç±»å‹ | ç¤ºä¾‹ |
|------|------|------|------|
| `tagRelation` | æ ‡ç­¾å…³ç³»ï¼š`"and"`ï¼ˆé»˜è®¤ï¼Œå¿…é¡»åŒæ—¶åŒ…å«æ‰€æœ‰æ ‡ç­¾ï¼‰æˆ– `"or"`ï¼ˆåŒ…å«ä»»æ„ä¸€ä¸ªæ ‡ç­¾å³å¯ï¼‰ | `"and"` \| `"or"` | `"and"` |

**è¯´æ˜**ï¼š
- å½“ `tag` å­—æ®µåŒ…å«å¤šä¸ªæ ‡ç­¾ï¼ˆç©ºæ ¼åˆ†éš”ï¼‰æ—¶ï¼Œ`tagRelation` å†³å®šè¿™äº›æ ‡ç­¾çš„å…³ç³»
- `"and"`ï¼ˆé»˜è®¤ï¼‰ï¼šä½œå“å¿…é¡»åŒæ—¶åŒ…å«æ‰€æœ‰æ ‡ç­¾
- `"or"`ï¼šä½œå“åªéœ€åŒ…å«ä»»æ„ä¸€ä¸ªæ ‡ç­¾å³å¯

### ç­›é€‰æ¡ä»¶å­—æ®µ

| å­—æ®µ | è¯´æ˜ | ç±»å‹ | ç¤ºä¾‹ |
|------|------|------|------|
| `minBookmarks` | æœ€ä½æ”¶è—æ•°ï¼ˆåªä¸‹è½½æ”¶è—æ•°å¤§äºç­‰äºæ­¤å€¼çš„ä½œå“ï¼‰ | `number` | `500` |
| `startDate` | å¼€å§‹æ—¥æœŸï¼ˆåªä¸‹è½½æ­¤æ—¥æœŸä¹‹åçš„ä½œå“ï¼‰ | `"YYYY-MM-DD"` | `"2024-01-01"` |
| `endDate` | ç»“æŸæ—¥æœŸï¼ˆåªä¸‹è½½æ­¤æ—¥æœŸä¹‹å‰çš„ä½œå“ï¼‰ | `"YYYY-MM-DD"` | `"2024-12-31"` |

### ç‰¹æ®Šä¸‹è½½æ¨¡å¼å­—æ®µ

| å­—æ®µ | è¯´æ˜ | ç±»å‹ | ç¤ºä¾‹ |
|------|------|------|------|
| `random` | æ˜¯å¦éšæœºé€‰æ‹©ï¼ˆä»æœç´¢ç»“æœä¸­éšæœºé€‰æ‹©ï¼Œè€Œä¸æ˜¯æŒ‰é¡ºåºä¸‹è½½ï¼‰ | `boolean` | `true` |
| `seriesId` | å°è¯´ç³»åˆ—IDï¼ˆä»… `type="novel"` æ—¶æœ‰æ•ˆï¼Œä¸‹è½½æ•´ä¸ªç³»åˆ—ï¼‰ | `number` | `14690617` |
| `novelId` | å•ç¯‡å°è¯´IDï¼ˆä»… `type="novel"` æ—¶æœ‰æ•ˆï¼Œä¸‹è½½å•ç¯‡å°è¯´ï¼‰ | `number` | `26132156` |

> **ğŸ’¡ æç¤º**ï¼š
> - å½“æŒ‡å®š `seriesId` æˆ– `novelId` æ—¶ï¼Œ`tag` å’Œ `mode` å­—æ®µä¼šè¢«å¿½ç•¥
> - `seriesId` å’Œ `novelId` ä¸èƒ½åŒæ—¶ä½¿ç”¨
> - ä½¿ç”¨ `seriesId` æ—¶ï¼Œ`limit` è¡¨ç¤ºæœ€å¤šä¸‹è½½ç³»åˆ—ä¸­çš„å¤šå°‘ç¯‡å°è¯´ï¼ˆé»˜è®¤ä¸‹è½½å…¨éƒ¨ï¼‰

## ğŸ¨ ä¸‹è½½ä»»åŠ¡ç±»å‹è¯¦è§£

### 1. æ ‡ç­¾æœç´¢ä¸‹è½½ï¼ˆæœ€å¸¸ç”¨ï¼‰

#### 1.1 åŸºç¡€æ ‡ç­¾æœç´¢

**åœºæ™¯**ï¼šä¸‹è½½åŒ…å«ç‰¹å®šæ ‡ç­¾çš„ä½œå“

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "åŸç¥",
      "limit": 20,
      "mode": "search"
    }
  ]
}
```

#### 1.2 å¤šæ ‡ç­¾æœç´¢ï¼ˆANDå…³ç³»ï¼‰

**åœºæ™¯**ï¼šä¸‹è½½åŒæ—¶åŒ…å«å¤šä¸ªæ ‡ç­¾çš„ä½œå“

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "æ˜æ—¥æ–¹èˆŸ ã‚¢ãƒ¼ã‚¯ãƒŠã‚¤ãƒ„ ã‚¢ãƒ¼ãƒŸãƒ¤",
      "limit": 30,
      "mode": "search",
      "searchTarget": "partial_match_for_tags"
    }
  ]
}
```

**è¯´æ˜**ï¼š
- åœ¨ `tag` å­—æ®µä¸­ç”¨**ç©ºæ ¼åˆ†éš”å¤šä¸ªæ ‡ç­¾**ï¼Œè¡¨ç¤ºä½œå“å¿…é¡»**åŒæ—¶åŒ…å«**æ‰€æœ‰è¿™äº›æ ‡ç­¾ï¼ˆANDå…³ç³»ï¼Œé»˜è®¤è¡Œä¸ºï¼‰
- æ”¯æŒä¸­æ–‡ã€æ—¥æ–‡ã€è‹±æ–‡æ ‡ç­¾æ··åˆä½¿ç”¨
- å»ºè®®ä½¿ç”¨ `"searchTarget": "partial_match_for_tags"` ä»¥è·å¾—æ›´å¥½çš„åŒ¹é…æ•ˆæœ

#### 1.2.1 å¤šæ ‡ç­¾æœç´¢ï¼ˆORå…³ç³»ï¼‰

**åœºæ™¯**ï¼šä¸‹è½½åŒ…å«ä»»æ„ä¸€ä¸ªæ ‡ç­¾çš„ä½œå“

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "å¤§è‚š ä¸¸å å¦Šå¨  å­•å¦‡",
      "tagRelation": "or",
      "limit": 50,
      "mode": "search",
      "searchTarget": "partial_match_for_tags",
      "sort": "popular_desc"
    }
  ]
}
```

**è¯´æ˜**ï¼š
- è®¾ç½® `"tagRelation": "or"` åï¼Œåœ¨ `tag` å­—æ®µä¸­ç”¨**ç©ºæ ¼åˆ†éš”å¤šä¸ªæ ‡ç­¾**ï¼Œè¡¨ç¤ºä½œå“åªéœ€**åŒ…å«ä»»æ„ä¸€ä¸ª**æ ‡ç­¾å³å¯ï¼ˆORå…³ç³»ï¼‰
- ç³»ç»Ÿä¼šåˆ†åˆ«æœç´¢æ¯ä¸ªæ ‡ç­¾ï¼Œåˆå¹¶ç»“æœå¹¶è‡ªåŠ¨å»é‡
- æ”¯æŒä¸­æ–‡ã€æ—¥æ–‡ã€è‹±æ–‡æ ‡ç­¾æ··åˆä½¿ç”¨
- é€‚åˆéœ€è¦æ‰©å¤§æœç´¢èŒƒå›´ï¼Œæ”¶é›†åŒ…å«ç›¸å…³æ ‡ç­¾çš„æ‰€æœ‰ä½œå“
- æ³¨æ„ï¼šORå…³ç³»ä¼šæœç´¢æ›´å¤šç»“æœï¼Œå¯èƒ½éœ€è¦æ›´é•¿æ—¶é—´

#### 1.3 æŒ‰æ”¶è—æ•°ç­›é€‰

**åœºæ™¯**ï¼šåªä¸‹è½½æ”¶è—æ•°è¾ƒé«˜çš„é«˜è´¨é‡ä½œå“

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "é¢¨æ™¯",
      "limit": 50,
      "mode": "search",
      "minBookmarks": 1000,
      "sort": "popular_desc"
    }
  ]
}
```

#### 1.4 æŒ‰æ—¥æœŸèŒƒå›´ç­›é€‰

**åœºæ™¯**ï¼šä¸‹è½½ç‰¹å®šæ—¶é—´æ®µå†…çš„ä½œå“

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "ã‚ªãƒªã‚¸ãƒŠãƒ«",
      "limit": 100,
      "mode": "search",
      "startDate": "2024-01-01",
      "endDate": "2024-12-31",
      "sort": "date_desc"
    }
  ]
}
```

#### 1.5 éšæœºä¸‹è½½

**åœºæ™¯**ï¼šä»æœç´¢ç»“æœä¸­éšæœºé€‰æ‹©ä½œå“ä¸‹è½½ï¼ˆé€‚åˆæ¯æ—¥éšæœºå£çº¸ç­‰åœºæ™¯ï¼‰

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "é¢¨æ™¯",
      "limit": 1,
      "mode": "search",
      "random": true,
      "minBookmarks": 500
    }
  ]
}
```

**è¯´æ˜**ï¼š
- `random: true` æ—¶ï¼Œä¼šå…ˆè·å– `limit` æ•°é‡çš„æœç´¢ç»“æœï¼Œç„¶åä»ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªä¸‹è½½
- é€‚åˆç”¨äºæ¯æ—¥éšæœºå£çº¸ã€éšæœºæ¨èç­‰åœºæ™¯

#### 1.6 æŒ‰ä¸åŒæ’åºæ–¹å¼ä¸‹è½½

**åœºæ™¯A**ï¼šä¸‹è½½æœ€æ–°ä½œå“

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "åŸç¥",
      "limit": 20,
      "mode": "search",
      "sort": "date_desc"
    }
  ]
}
```

**åœºæ™¯B**ï¼šä¸‹è½½æœ€å—æ¬¢è¿çš„ä½œå“

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "åŸç¥",
      "limit": 20,
      "mode": "search",
      "sort": "popular_desc"
    }
  ]
}
```

**åœºæ™¯C**ï¼šä¸‹è½½æœ€æ—©çš„ä½œå“ï¼ˆè€ƒå¤å‘ï¼‰

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "åŸç¥",
      "limit": 20,
      "mode": "search",
      "sort": "date_asc"
    }
  ]
}
```

### 2. æ’è¡Œæ¦œä¸‹è½½

#### 2.1 ä¸‹è½½ä»Šæ—¥æ’è¡Œæ¦œ

**åœºæ™¯**ï¼šä¸‹è½½ä»Šæ—¥æ’è¡Œæ¦œå‰Nåä½œå“

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "ranking",
      "limit": 10,
      "mode": "ranking",
      "rankingMode": "day"
    }
  ]
}
```

#### 2.2 ä»æ’è¡Œæ¦œä¸­ç­›é€‰ç‰¹å®šæ ‡ç­¾

**åœºæ™¯**ï¼šä»ä»Šæ—¥æ’è¡Œæ¦œä¸­ç­›é€‰åŒ…å«ç‰¹å®šæ ‡ç­¾çš„ä½œå“

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "ã‚¢ãƒ¼ã‚¯ãƒŠã‚¤ãƒ„",
      "limit": 20,
      "mode": "ranking",
      "rankingMode": "day",
      "filterTag": "ã‚¢ãƒ¼ã‚¯ãƒŠã‚¤ãƒ„"
    }
  ]
}
```

**è¯´æ˜**ï¼š
- `filterTag` ç”¨äºä»æ’è¡Œæ¦œç»“æœä¸­ç­›é€‰åŒ…å«è¯¥æ ‡ç­¾çš„ä½œå“
- å¦‚æœæ’è¡Œæ¦œä¸­ç¬¦åˆæ ‡ç­¾çš„ä½œå“è¾ƒå°‘ï¼Œå¯èƒ½éœ€è¦è·å–æ›´å¤šæ’åä½œå“æ‰èƒ½è¾¾åˆ° `limit` æ•°é‡

#### 2.3 ä¸‹è½½æŒ‡å®šæ—¥æœŸçš„æ’è¡Œæ¦œ

**åœºæ™¯**ï¼šä¸‹è½½å†å²æŸä¸€å¤©çš„æ’è¡Œæ¦œ

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "ranking",
      "limit": 50,
      "mode": "ranking",
      "rankingMode": "day",
      "rankingDate": "2024-01-15"
    }
  ]
}
```

#### 2.4 ä¸‹è½½å‘¨æ¦œ/æœˆæ¦œ

**åœºæ™¯A**ï¼šä¸‹è½½æœ¬å‘¨æ’è¡Œæ¦œ

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "ranking",
      "limit": 30,
      "mode": "ranking",
      "rankingMode": "week"
    }
  ]
}
```

**åœºæ™¯B**ï¼šä¸‹è½½æœ¬æœˆæ’è¡Œæ¦œ

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "ranking",
      "limit": 50,
      "mode": "ranking",
      "rankingMode": "month"
    }
  ]
}
```

#### 2.5 ä¸‹è½½åˆ†ç±»æ’è¡Œæ¦œ

**åœºæ™¯A**ï¼šä¸‹è½½ç”·æ€§å‘æ’è¡Œæ¦œ

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "ranking",
      "limit": 20,
      "mode": "ranking",
      "rankingMode": "day_male"
    }
  ]
}
```

**åœºæ™¯B**ï¼šä¸‹è½½å¥³æ€§å‘æ’è¡Œæ¦œ

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "ranking",
      "limit": 20,
      "mode": "ranking",
      "rankingMode": "day_female"
    }
  ]
}
```

**åœºæ™¯C**ï¼šä¸‹è½½AIä½œå“æ’è¡Œæ¦œ

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "ranking",
      "limit": 20,
      "mode": "ranking",
      "rankingMode": "day_ai"
    }
  ]
}
```

**åœºæ™¯D**ï¼šä¸‹è½½åŸåˆ›ä½œå“å‘¨æ¦œ

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "ranking",
      "limit": 30,
      "mode": "ranking",
      "rankingMode": "week_original"
    }
  ]
}
```

**åœºæ™¯E**ï¼šä¸‹è½½æ–°äººä½œå“å‘¨æ¦œ

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "ranking",
      "limit": 30,
      "mode": "ranking",
      "rankingMode": "week_rookie"
    }
  ]
}
```

#### 2.6 ä¸‹è½½æ˜¨å¤©æ’è¡Œæ¦œ

**åœºæ™¯**ï¼šä¸‹è½½æ˜¨å¤©çš„æ’è¡Œæ¦œï¼ˆä½¿ç”¨ `YESTERDAY` å ä½ç¬¦ï¼‰

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "ranking",
      "limit": 10,
      "mode": "ranking",
      "rankingMode": "day",
      "rankingDate": "YESTERDAY"
    }
  ]
}
```

### 3. å°è¯´ä¸‹è½½

#### 3.1 æ ‡ç­¾æœç´¢å°è¯´

**åœºæ™¯**ï¼šä¸‹è½½åŒ…å«ç‰¹å®šæ ‡ç­¾çš„å°è¯´

```json
{
  "targets": [
    {
      "type": "novel",
      "tag": "ã‚ªãƒªã‚¸ãƒŠãƒ«",
      "limit": 20,
      "mode": "search",
      "searchTarget": "partial_match_for_tags"
    }
  ]
}
```

#### 3.2 ä¸‹è½½å°è¯´ç³»åˆ—

**åœºæ™¯**ï¼šä¸‹è½½æ•´ä¸ªå°è¯´ç³»åˆ—**

ä» URL `https://www.pixiv.net/novel/series/14690617` ä¸­æå–ç³»åˆ—ID `14690617`

```json
{
  "targets": [
    {
      "type": "novel",
      "seriesId": 14690617,
      "limit": 50
    }
  ]
}
```

**è¯´æ˜**ï¼š
- `seriesId` ä¼˜å…ˆçº§é«˜äº `tag` å’Œ `mode`
- `limit` è¡¨ç¤ºæœ€å¤šä¸‹è½½ç³»åˆ—ä¸­çš„å¤šå°‘ç¯‡å°è¯´ï¼ˆé»˜è®¤ä¸‹è½½å…¨éƒ¨ï¼‰
- å·²ä¸‹è½½çš„å°è¯´ä¼šè‡ªåŠ¨è·³è¿‡

#### 3.3 ä¸‹è½½å•ç¯‡å°è¯´

**åœºæ™¯**ï¼šä¸‹è½½æŒ‡å®šIDçš„å•ç¯‡å°è¯´

ä» URL `https://www.pixiv.net/novel/show.php?id=26132156` ä¸­æå–å°è¯´ID `26132156`

```json
{
  "targets": [
    {
      "type": "novel",
      "novelId": 26132156
    }
  ]
}
```

**è¯´æ˜**ï¼š
- `novelId` ä¼˜å…ˆçº§æœ€é«˜ï¼Œä¼šå¿½ç•¥å…¶ä»–å­—æ®µ
- ä¸éœ€è¦ `limit` å­—æ®µï¼ˆåªä¸‹è½½ä¸€ç¯‡ï¼‰

#### 3.4 å°è¯´æ’è¡Œæ¦œä¸‹è½½

**åœºæ™¯**ï¼šä»å°è¯´æ’è¡Œæ¦œä¸­ä¸‹è½½

```json
{
  "targets": [
    {
      "type": "novel",
      "tag": "ã‚ªãƒªã‚¸ãƒŠãƒ«",
      "limit": 20,
      "mode": "ranking",
      "rankingMode": "day",
      "filterTag": "ã‚ªãƒªã‚¸ãƒŠãƒ«"
    }
  ]
}
```

### 4. ç»„åˆç­›é€‰æ¡ä»¶

#### 4.1 å¤šæ¡ä»¶ç»„åˆ

**åœºæ™¯**ï¼šä¸‹è½½2024å¹´æ”¶è—æ•°è¶…è¿‡1000çš„é«˜è´¨é‡ä½œå“

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "é¢¨æ™¯",
      "limit": 100,
      "mode": "search",
      "minBookmarks": 1000,
      "startDate": "2024-01-01",
      "endDate": "2024-12-31",
      "sort": "popular_desc"
    }
  ]
}
```

#### 4.2 å¤šæ ‡ç­¾ + ç­›é€‰æ¡ä»¶

**åœºæ™¯**ï¼šä¸‹è½½åŒæ—¶åŒ…å«å¤šä¸ªæ ‡ç­¾ä¸”æ”¶è—æ•°è¾ƒé«˜çš„ä½œå“

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "æ˜æ—¥æ–¹èˆŸ ã‚¢ãƒ¼ã‚¯ãƒŠã‚¤ãƒ„ ã‚¢ãƒ¼ãƒŸãƒ¤",
      "limit": 50,
      "mode": "search",
      "minBookmarks": 500,
      "sort": "popular_desc",
      "searchTarget": "partial_match_for_tags"
    }
  ]
}
```

### 5. å¤šç›®æ ‡ç»„åˆä¸‹è½½

**åœºæ™¯**ï¼šåŒæ—¶é…ç½®å¤šä¸ªä¸åŒçš„ä¸‹è½½ä»»åŠ¡

```json
{
  "targets": [
    {
      "type": "illustration",
      "tag": "åŸç¥",
      "limit": 20,
      "mode": "search",
      "sort": "popular_desc"
    },
    {
      "type": "illustration",
      "tag": "ã‚¢ãƒ¼ã‚¯ãƒŠã‚¤ãƒ„",
      "limit": 20,
      "mode": "search",
      "sort": "popular_desc"
    },
    {
      "type": "illustration",
      "tag": "ranking",
      "limit": 10,
      "mode": "ranking",
      "rankingMode": "day"
    },
    {
      "type": "novel",
      "tag": "ã‚ªãƒªã‚¸ãƒŠãƒ«",
      "limit": 10,
      "mode": "search"
    }
  ]
}
```

**è¯´æ˜**ï¼š
- å¤šä¸ªç›®æ ‡ä¼š**æŒ‰é¡ºåºæ‰§è¡Œ**
- æ¯ä¸ªç›®æ ‡ç‹¬ç«‹é…ç½®ï¼Œäº’ä¸å½±å“
- é€‚åˆåŒæ—¶ä¸‹è½½å¤šä¸ªä¸åŒæ ‡ç­¾æˆ–ä¸åŒç±»å‹çš„ä½œå“

## ğŸ”§ é«˜çº§é…ç½®

### å®Œæ•´é…ç½®ç¤ºä¾‹

å‚è€ƒ `config/standalone.config.example.json` æŸ¥çœ‹å®Œæ•´çš„é…ç½®ç¤ºä¾‹ï¼ŒåŒ…æ‹¬ï¼š
- ç½‘ç»œé…ç½®ï¼ˆä»£ç†ã€è¶…æ—¶ç­‰ï¼‰
- å­˜å‚¨é…ç½®ï¼ˆä¸‹è½½ç›®å½•ã€æ•°æ®åº“è·¯å¾„ã€ç›®å½•ç»„ç»‡æ–¹å¼ï¼‰
- ä¸‹è½½é…ç½®ï¼ˆå¹¶å‘æ•°ã€é‡è¯•æ¬¡æ•°ç­‰ï¼‰
- è°ƒåº¦å™¨é…ç½®ï¼ˆå®šæ—¶ä»»åŠ¡ï¼‰

### å­˜å‚¨é…ç½® - ç›®å½•ç»„ç»‡

PixivFlow æ”¯æŒå¤šç§ç›®å½•ç»„ç»‡æ–¹å¼ï¼Œè®©ä¸‹è½½çš„æ–‡ä»¶æ›´æœ‰æ¡ç†ï¼š

```json
{
  "storage": {
    "illustrationDirectory": "./downloads/illustrations",
    "illustrationOrganization": "byAuthorAndTag",
    "novelDirectory": "./downloads/novels",
    "novelOrganization": "byDateAndAuthor"
  }
}
```

**æ”¯æŒçš„ç»„ç»‡æ¨¡å¼**ï¼š
- `flat` - æ‰å¹³ç»“æ„ï¼ˆé»˜è®¤ï¼‰
- `byAuthor` - æŒ‰ä½œè€…ç»„ç»‡
- `byTag` - æŒ‰æ ‡ç­¾ç»„ç»‡
- `byDate` - æŒ‰æ—¥æœŸç»„ç»‡ï¼ˆYYYY-MMï¼‰
- `byAuthorAndTag` - æŒ‰ä½œè€…å’Œæ ‡ç­¾
- `byDateAndAuthor` - æŒ‰æ—¥æœŸå’Œä½œè€…

è¯¦ç»†è¯´æ˜è¯·å‚è€ƒ [STANDALONE-SETUP-GUIDE.md](STANDALONE-SETUP-GUIDE.md#4-å­˜å‚¨é…ç½®)ã€‚

### ä¸‹è½½é…ç½®

```json
{
  "download": {
    "concurrency": 3,
    "requestDelay": 500,
    "dynamicConcurrency": true,
    "minConcurrency": 1,
    "maxRetries": 3,
    "retryDelay": 2000,
    "timeout": 60000
  }
}
```

| å­—æ®µ | è¯´æ˜ | é»˜è®¤å€¼ |
|------|------|--------|
| `concurrency` | æœ€å¤§å¹¶å‘ä¸‹è½½æ•°ï¼ˆå»ºè®®èŒƒå›´ 1-10ï¼‰ | `3` |
| `requestDelay` | API è¯·æ±‚ä¹‹é—´çš„æœ€å°å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰ï¼Œç”¨äºé¿å…é€Ÿç‡é™åˆ¶ | `500` |
| `dynamicConcurrency` | æ˜¯å¦å¯ç”¨åŠ¨æ€å¹¶å‘è°ƒæ•´ã€‚å½“æ£€æµ‹åˆ°é€Ÿç‡é™åˆ¶ï¼ˆ429é”™è¯¯ï¼‰æ—¶ï¼Œè‡ªåŠ¨é™ä½å¹¶å‘æ•° | `true` |
| `minConcurrency` | åŠ¨æ€è°ƒæ•´æ—¶çš„æœ€å°å¹¶å‘æ•°ï¼Œä¸ä¼šä½äºæ­¤å€¼ | `1` |
| `maxRetries` | æ¯ä¸ªä¸‹è½½çš„æœ€å¤§é‡è¯•æ¬¡æ•° | `3` |
| `retryDelay` | é‡è¯•å»¶è¿Ÿï¼ˆæ¯«ç§’ï¼‰ | `2000` |
| `timeout` | ä¸‹è½½è¶…æ—¶æ—¶é—´ï¼ˆæ¯«ç§’ï¼‰ | `60000` |

#### å¹¶å‘æ§åˆ¶è¯´æ˜

PixivFlow æä¾›äº†æ™ºèƒ½çš„å¹¶å‘æ§åˆ¶æœºåˆ¶ï¼Œå¸®åŠ©æ‚¨é¿å…è§¦å‘ Pixiv API çš„é€Ÿç‡é™åˆ¶ï¼š

1. **è¯·æ±‚å»¶è¿Ÿæ§åˆ¶**ï¼šæ¯ä¸ª API è¯·æ±‚ä¹‹é—´ä¼šè‡ªåŠ¨æ·»åŠ  `requestDelay` æ¯«ç§’çš„å»¶è¿Ÿï¼Œæœ‰æ•ˆé™ä½è§¦å‘é€Ÿç‡é™åˆ¶çš„æ¦‚ç‡ã€‚

2. **åŠ¨æ€å¹¶å‘è°ƒæ•´**ï¼ˆé»˜è®¤å¯ç”¨ï¼‰ï¼š
   - å½“æ£€æµ‹åˆ°é€Ÿç‡é™åˆ¶ï¼ˆ429 é”™è¯¯ï¼‰æ—¶ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨å°†å¹¶å‘æ•°å‡åŠ
   - å¹¶å‘æ•°ä¸ä¼šä½äº `minConcurrency` è®¾ç½®çš„å€¼
   - è¿ç»­æˆåŠŸè¯·æ±‚åï¼Œç³»ç»Ÿä¼šé€æ­¥æ¢å¤å¹¶å‘æ•°
   - ç³»ç»Ÿä¼šè®°å½•è¯¦ç»†çš„æ—¥å¿—ï¼ŒåŒ…æ‹¬å¹¶å‘æ•°å˜åŒ–ä¿¡æ¯

3. **é˜Ÿåˆ—å¼å¤„ç†**ï¼šä½¿ç”¨é˜Ÿåˆ—è€Œéæ‰¹æ¬¡å¤„ç†ï¼Œä¿æŒç¨³å®šçš„å¹¶å‘æ•°ï¼Œä»»åŠ¡å®Œæˆåç«‹å³å¯åŠ¨æ–°ä»»åŠ¡ï¼Œæé«˜èµ„æºåˆ©ç”¨ç‡ã€‚

**æ¨èé…ç½®**ï¼š
- å¦‚æœç»å¸¸é‡åˆ°é€Ÿç‡é™åˆ¶ï¼Œå¯ä»¥ï¼š
  - å¢åŠ  `requestDelay`ï¼ˆä¾‹å¦‚ 1000-2000msï¼‰
  - é™ä½ `concurrency`ï¼ˆä¾‹å¦‚ 1-2ï¼‰
  - ä¿æŒ `dynamicConcurrency: true` ä»¥è‡ªåŠ¨é€‚åº”
- å¦‚æœç½‘ç»œç¨³å®šä¸”å¾ˆå°‘é‡åˆ°é€Ÿç‡é™åˆ¶ï¼Œå¯ä»¥ï¼š
  - é€‚å½“å¢åŠ  `concurrency`ï¼ˆä¾‹å¦‚ 3-5ï¼‰
  - ä¿æŒè¾ƒå°çš„ `requestDelay`ï¼ˆä¾‹å¦‚ 300-500msï¼‰

### å®šæ—¶ä»»åŠ¡é…ç½®

```json
{
  "scheduler": {
    "enabled": true,
    "cron": "0 3 * * *",
    "timezone": "Asia/Shanghai"
  }
}
```

**Cron è¡¨è¾¾å¼é€ŸæŸ¥**ï¼š

| è¡¨è¾¾å¼ | è¯´æ˜ |
|--------|------|
| `0 * * * *` | æ¯å°æ—¶æ‰§è¡Œ |
| `0 */6 * * *` | æ¯ 6 å°æ—¶æ‰§è¡Œ |
| `0 2 * * *` | æ¯å¤© 2:00 æ‰§è¡Œ |
| `0 0 * * 0` | æ¯å‘¨æ—¥ 0:00 æ‰§è¡Œ |
| `0 0 1 * *` | æ¯æœˆ 1 å· 0:00 æ‰§è¡Œ |

## â“ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•æ·»åŠ æ–°çš„ä¸‹è½½ä»»åŠ¡ï¼Ÿ

**A:** åªéœ€åœ¨é…ç½®æ–‡ä»¶çš„ `targets` æ•°ç»„ä¸­æ·»åŠ æ–°çš„ç›®æ ‡å¯¹è±¡ï¼Œæ— éœ€ä¿®æ”¹ä»£ç ã€‚

### Q: å¦‚æœé…ç½®æ–‡ä»¶æ— æ³•å®ç°æŸä¸ªéœ€æ±‚æ€ä¹ˆåŠï¼Ÿ

**A:** è¿™è¯´æ˜é€šç”¨åŠŸèƒ½éœ€è¦å¢å¼ºã€‚è¯·ï¼š
1. æ£€æŸ¥æ˜¯å¦æœ‰é—æ¼çš„é…ç½®é€‰é¡¹
2. å¦‚æœç¡®å®æ— æ³•å®ç°ï¼Œå¯ä»¥æå‡ºåŠŸèƒ½éœ€æ±‚æˆ–æäº¤ Issue
3. **ä¸è¦**åˆ›å»ºç‰¹å®šè„šæœ¬æ¥ç»•è¿‡è¿™ä¸ªé—®é¢˜

### Q: å¯ä»¥åŒæ—¶è¿è¡Œå¤šä¸ªä¸åŒçš„é…ç½®æ–‡ä»¶å—ï¼Ÿ

**A:** å¯ä»¥ï¼Œä½†éœ€è¦åˆ†åˆ«è¿è¡Œï¼š
```bash
# è¿è¡Œç¬¬ä¸€ä¸ªé…ç½®
pixivflow download --config config/config1.json

# è¿è¡Œç¬¬äºŒä¸ªé…ç½®
pixivflow download --config config/config2.json
```

æˆ–è€…ä½¿ç”¨è°ƒåº¦å™¨ï¼Œä¸ºä¸åŒçš„é…ç½®æ–‡ä»¶è®¾ç½®ä¸åŒçš„å®šæ—¶ä»»åŠ¡ã€‚

### Q: å¤šæ ‡ç­¾æœç´¢æ—¶ï¼Œæ ‡ç­¾çš„é¡ºåºé‡è¦å—ï¼Ÿ

**A:** ä¸é‡è¦ã€‚`"æ˜æ—¥æ–¹èˆŸ ã‚¢ãƒ¼ã‚¯ãƒŠã‚¤ãƒ„"` å’Œ `"ã‚¢ãƒ¼ã‚¯ãƒŠã‚¤ãƒ„ æ˜æ—¥æ–¹èˆŸ"` æ•ˆæœç›¸åŒã€‚

### Q: å¦‚ä½•ä» Pixiv URL ä¸­æå– IDï¼Ÿ

**A:** 
- **å°è¯´ç³»åˆ—**ï¼šä» `https://www.pixiv.net/novel/series/14690617` ä¸­æå– `14690617`
- **å•ç¯‡å°è¯´**ï¼šä» `https://www.pixiv.net/novel/show.php?id=26132156` ä¸­æå– `26132156`
- **æ’ç”»**ï¼šä» `https://www.pixiv.net/artworks/12345678` ä¸­æå– `12345678`ï¼ˆç›®å‰ä¸æ”¯æŒç›´æ¥ä¸‹è½½ï¼Œéœ€è¦é€šè¿‡æ ‡ç­¾æœç´¢ï¼‰

### Q: æ’è¡Œæ¦œä¸‹è½½æ—¶ï¼Œä¸ºä»€ä¹ˆç­›é€‰æ ‡ç­¾åä¸‹è½½å¾ˆæ…¢ï¼Ÿ

**A:** å› ä¸ºéœ€è¦ä¸ºæ¯ä¸ªä½œå“è·å–è¯¦ç»†ä¿¡æ¯æ¥æ£€æŸ¥æ ‡ç­¾ã€‚å¦‚æœä¸éœ€è¦ç­›é€‰ï¼Œå»ºè®®ä¸ä½¿ç”¨ `filterTag`ï¼Œç›´æ¥ä¸‹è½½æ’è¡Œæ¦œä½œå“ã€‚

### Q: `random: true` æ—¶ï¼Œ`limit` çš„å«ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿ

**A:** `limit` è¡¨ç¤ºä»æœç´¢ç»“æœä¸­è·å–å¤šå°‘ä¸ªä½œå“ï¼Œç„¶åä»ä¸­éšæœºé€‰æ‹©ä¸€ä¸ªä¸‹è½½ã€‚ä¾‹å¦‚ `limit: 100` ä¼šè·å–å‰100ä¸ªç»“æœï¼Œç„¶åéšæœºé€‰æ‹©1ä¸ªã€‚

### Q: å¦‚ä½•ä¸‹è½½ç‰¹å®šä½œè€…çš„æ‰€æœ‰ä½œå“ï¼Ÿ

**A:** ç›®å‰ä¸æ”¯æŒç›´æ¥æŒ‰ä½œè€…IDä¸‹è½½ã€‚å¯ä»¥é€šè¿‡æœç´¢ä½œè€…åä½œä¸ºæ ‡ç­¾æ¥ä¸‹è½½ï¼Œä½†å¯èƒ½ä¸å¤Ÿç²¾ç¡®ã€‚å»ºè®®ä½¿ç”¨ Pixiv çš„æ”¶è—åŠŸèƒ½ï¼Œç„¶åä¸‹è½½æ”¶è—çš„ä½œå“ã€‚

### Q: ä¸‹è½½çš„å°è¯´ä¿å­˜åœ¨å“ªé‡Œï¼Ÿ

**A:** é»˜è®¤ä¿å­˜åœ¨ `./downloads/novels/` ç›®å½•ã€‚å¯ä»¥é€šè¿‡ `storage.novelDirectory` é…ç½®è‡ªå®šä¹‰è·¯å¾„ã€‚

### Q: å¦‚ä½•é¿å…é‡å¤ä¸‹è½½ï¼Ÿ

**A:** ç¨‹åºä¼šè‡ªåŠ¨æ£€æŸ¥æ•°æ®åº“ï¼Œå·²ä¸‹è½½çš„ä½œå“ä¸ä¼šé‡å¤ä¸‹è½½ã€‚æ•°æ®åº“è·¯å¾„ç”± `storage.databasePath` é…ç½®ï¼ˆé»˜è®¤ `./data/pixiv-downloader.db`ï¼‰ã€‚

## ğŸ“š æ›´å¤šèµ„æº

- `config/standalone.config.example.json` - åŸºç¡€é…ç½®ç¤ºä¾‹
- `config/specific-download.example.json` - ç‰¹å®šä»»åŠ¡é…ç½®ç¤ºä¾‹
- `config/standalone.config.ranking.json` - æ’è¡Œæ¦œä¸‹è½½é…ç½®ç¤ºä¾‹
- [STANDALONE-SETUP-GUIDE.md](STANDALONE-SETUP-GUIDE.md) - è¯¦ç»†è®¾ç½®æŒ‡å—
- [RANKING_DOWNLOAD_GUIDE.md](RANKING_DOWNLOAD_GUIDE.md) - æ’è¡Œæ¦œä¸‹è½½æŒ‡å—
